# Ant
# Build your Java projects and run tests with Apache Ant.
# Add steps that save build artifacts and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      # Install packaging dependencies
      sudo apt-get update
      sudo apt-get install -y fakeroot alien
      # Install and configure an appropriate JDK
      sudo apt-get install -y openjdk-8-jdk openjfx
      echo "##vso[task.setvariable variable=jdkDir]/usr/lib/jvm/java-8-openjdk-amd64"
      echo "##vso[task.prependpath]/usr/lib/jvm/java-8-openjdk-amd64/bin"
- task: Ant@1
  inputs:
    workingDirectory: ''
    buildFile: 'JobTimeTracking/build.xml'
    javaHomeOption: Path
    jdkDirectory: $(jdkDir)
    jdkUserInputPath:
    publishJUnitResults: true
    testResultsFiles: '**/TEST-*.xml'
